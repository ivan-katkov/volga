<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>{% if page.title %}{{ page.title | escape }}{% else %}{{ site.title | escape }}{% endif %}</title>
  <meta name="description" content="{% if page.excerpt %}{{ page.excerpt | strip_html | strip_newlines | truncate: 160 }}{% else %}{{ site.description }}{% endif %}">

  <link rel="stylesheet" href="{{ "/css/main.css" | prepend: site.baseurl }}">
  <link rel="canonical" href="{{ page.url | replace:'index.html','' | prepend: site.baseurl | prepend: site.url }}">
  <link rel="alternate" type="application/rss+xml" title="{{ site.title }}" href="{{ "/feed.xml" | prepend: site.baseurl | prepend: site.url }}">
  <link rel="shortcut icon" href="{{ site.baseurl }}/favicon.ico">
  
  <script type="text/x-mathjax-config">
  	MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['{','}'], ['\\(','\\)']]}});
  </script>
  <script type="text/javascript" async
    src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_CHTML">
  </script>

  <script type="text/javascript">

  // var abs= document.getElementById('abs_{{ include.param | replace: '.' '_' }}');
  // var button= document.getElementById('button_{{ include.param | replace: '.' '_' }}');

  function load_abstract( id ){    
    var nms = document.getElementById('names_'+id);
  	var abs = document.getElementById('a_'+id);
  	var button = document.getElementById(id);
  	
  	button.innerHTML = 'Загружаю...'

    var xhr = new XMLHttpRequest();
    xhr.open("GET","http://export.arxiv.org/api/query?id_list="+id,true);
    xhr.send();
    xhr.onreadystatechange = function() { // (3)
        if (xhr.readyState != 4) return;

        button.innerHTML = 'Сделано!';

        if (xhr.status != 200) {
          alert(xhr.status + ': ' + xhr.statusText);
        } else {
          xml = xhr.responseXML;          
          // title = xml.getElementsByTagName("title")[1].innerHTML          
          summary = xml.getElementsByTagName("summary")[0].innerHTML
          abs.innerHTML = summary;

          names = xml.getElementsByTagName("name")                    
          full_names = "";
          delimiter = ", ";          
          for (q = 0; q < names.length; q++) {
            if (q == (names.length - 1)) delimiter = ""; 
            full_names += names[q].innerHTML+delimiter
          }          
          nms.innerHTML = full_names;          
          
          MathJax.Hub.Queue(["Typeset", MathJax.Hub, abs]);
        }

      }
      
  }

  </script>
</head>
